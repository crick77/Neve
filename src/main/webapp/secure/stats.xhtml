<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>PrimeFlex</title>
        <h:outputStylesheet library="webjars" name="primeflex/2.0.0/primeflex.min.css" />        
        <link rel="stylesheet" id="layout-css" href="../css/themes/saga-blue.css" />        
        <link rel="stylesheet" href="../css/styles.css" />
        <link rel="icon" type="image/x-icon" href="../images/favicon.ico" />
        
        <f:metadata>
            <f:viewAction action="#{statisticheController.initialize()}" />
        </f:metadata>
    </h:head>
    <h:body>
        <h:form enctype="multipart/form-data" id="mainform">
            <header>
                <div class="layout-topbar flex align-items-center justify-content-between">
                    <div class="mobile-menu-wrapper">
                        <a class="mobile-button" id="mobile-button" ><i class="pi pi-bars"></i></a>                    
                        <img src="../images/logomain.png" alt="prime" id="mobile-logo" />                    
                    </div>
                    <div class="layout-topbar-left">
                        <img src="../images/logomain.png" alt="prime" id="topbar-logo" />
                    </div>
                </div>
            </header>
            <main>
                <div class="layout-menu-wrapper" id="layout-menu-wrapper">
                    <ul class="layout-menu" id="layout-menu">
                        <li>
                            <div class="menuitem-root-text mt-3" style="display: block">
                                USR NEVE
                            </div>
                            <a href="istruttorie.xhtml" style="display: block">
                                ISTRUTTORIE
                            </a>
                        </li>
                        <li>  
                            <div class="menuitem-root-text mt-3">
                                NUOVA
                            </div>
                            <a href="istruttoria.xhtml" style="display: block">
                                NUOVA
                            </a>
                        </li>
                        <li class="active-menuitem">  
                            <div class="menuitem-root-text mt-3">
                                STATISTICHE
                            </div>
                            <a href="stats.xhtml" style="display: block">
                                STATISTICHE
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="layout-main">
                    <div class="layout-content documentation" id="doc">
                        <div class="ui-fluid">
                            <p:polarAreaChart model="#{statisticheController.comunePraticheChart}" style="width: 100%; height: 500px;" widgetVar="comunePraticheChart" />
                        </div> 
                        <div class="ui-fluid">
                            <p:barChart model="#{statisticheController.comuneTotaleChart}" style="width: 100%; height: 500px;" widgetVar="comuneTotaleChart" />
                        </div> 
                        <div class="ui-fluid">
                            <p:pieChart model="#{statisticheController.esitoChart}" style="width: 100%; height: 500px;" widgetVar="esitoChart" />
                        </div> 
                        <div class="ui-fluid">
                            <p:barChart model="#{statisticheController.statoChart}" style="width: 100%; height: 500px;" widgetVar="statoChart" />
                        </div> 
                    </div>                
                </div>

                <div id="layout-mask" class="layout-mask"></div>
            </main>
        </h:form>
    </h:body>
    <script language="javascript">
        function comuneTotaleExtender() {       
            const formatter = new Intl.NumberFormat("en-US", {
                style: "currency",
                currency: "USD"
            }); // Change locale according to your currency and country

            console.log(this.cfg.seriesDefaults);
            //this.cfg.seriesDefaults = {
            //    shadowDepth: 5
            //}
            
            this.cfg.options = {
                scales: {
                    yAxes: [
                        {
                            ticks: {
                                callback: (label, index, labels) => {
                                    return formatter.format(label);
                                }
                            }
                        }
                    ]
                }
            }          
        }
    </script>
</html>